{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Owner/Desktop/github/Blog/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Owner/Desktop/github/Blog/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Owner/Desktop/github/Blog/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Owner/Desktop/github/Blog/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Owner/Desktop/github/Blog/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useContext}from\"react\";import{StateContext}from\"../StateContext\";import'react-quill/dist/quill.snow.css';import{Navigate}from\"react-router-dom\";import{Editor}from\"../functions/Editor\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Blog=function Blog(){var _useState=useState({title:\"\",summary:\"\"}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),files=_useState6[0],setFiles=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),redirect=_useState8[0],setRedirect=_useState8[1];var _useContext=useContext(StateContext),status=_useContext.status;var inputRef=useRef(null);var postData=function postData(event){var name=event.target.name;//console.log(name)\nvar value=event.target.value;setPost(function(prevValue){return _objectSpread(_objectSpread({},prevValue),{},_defineProperty({},name,value));});};var postFiles=function postFiles(event){setFiles(event.target.files[0]);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();data=new FormData();data.set('title',post.title);data.set('summary',post.summary);data.set('file',files);data.set('content',content);_context.next=8;return fetch('http://localhost:4000/submit',{method:\"POST\",credentials:'include',body:data}).then(function(response){//console.log(response)\nif(response.ok){alert('Sucessfully published');setPost({title:\"\",summary:\"\"});setContent(\"\");inputRef.current.value=null;setRedirect(true);}else{alert('Failed to publish');}});case 8:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return status&&/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"post\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{onChange:postData,type:\"text\",name:\"title\",placeholder:\"Your Blog title\",value:post.title,required:true}),/*#__PURE__*/_jsx(\"input\",{onChange:postData,type:\"text\",name:\"summary\",placeholder:\"Summary\",maxLength:\"150\",value:post.summary}),/*#__PURE__*/_jsx(\"input\",{onChange:postFiles,ref:inputRef,type:\"file\",name:\"image\",required:true}),/*#__PURE__*/_jsx(Editor,{value:content,onChange:setContent}),/*#__PURE__*/_jsx(\"button\",{id:\"post-btn\",type:\"submit\",children:\"Publish\"})]})});};export default Blog;","map":{"version":3,"names":["React","useRef","useState","useContext","StateContext","Navigate","Editor","jsx","_jsx","jsxs","_jsxs","Blog","_useState","title","summary","_useState2","_slicedToArray","post","setPost","_useState3","_useState4","content","setContent","_useState5","_useState6","files","setFiles","_useState7","_useState8","redirect","setRedirect","_useContext","status","inputRef","postData","event","name","target","value","prevValue","_objectSpread","_defineProperty","postFiles","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","preventDefault","FormData","set","fetch","method","credentials","body","then","response","ok","alert","current","stop","_x","apply","arguments","to","children","className","onChange","type","placeholder","required","maxLength","ref","id"],"sources":["C:/Users/Owner/Desktop/github/blog/frontend/src/components/Blog.jsx"],"sourcesContent":["import React, { useRef, useState, useContext } from \"react\";\r\nimport { StateContext } from \"../StateContext\";\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { Editor } from \"../functions/Editor\";\r\n\r\n    \r\n\r\nconst Blog = ()=>{\r\n\r\n    const [post, setPost] = useState({title:\"\", summary:\"\"});\r\n    const [content, setContent] = useState(\"\");\r\n    const [files, setFiles] = useState({});\r\n    const [redirect, setRedirect] = useState(false);\r\n    const {status} = useContext(StateContext);\r\n    const inputRef = useRef(null); \r\n\r\n    const postData = (event)=>{\r\n       const name = event.target.name;\r\n       //console.log(name)\r\n       const value = event.target.value;\r\n        setPost(prevValue=>{\r\n            return(\r\n                {\r\n                  ...prevValue,\r\n                  [name] : value  \r\n                }\r\n            )\r\n        })\r\n    }\r\n\r\n    const postFiles = event=> {\r\n      setFiles(event.target.files[0]);\r\n    }\r\n    \r\n  \r\n    const onSubmit= async event=>{\r\n        event.preventDefault();\r\n        let data = new FormData()\r\n        data.set('title', post.title);\r\n        data.set('summary', post.summary);\r\n        data.set('file', files);\r\n        data.set('content', content);\r\n\r\n        \r\n\r\n        await fetch('http://localhost:4000/submit', {\r\n            method:\"POST\",\r\n            credentials: 'include',\r\n            body: data\r\n            \r\n        }).then(response=>{\r\n            //console.log(response)\r\n            if(response.ok){\r\n                alert('Sucessfully published');\r\n                setPost({title:\"\", summary:\"\"});\r\n                setContent(\"\");\r\n                inputRef.current.value = null;\r\n                setRedirect(true);\r\n              }\r\n              else{\r\n                alert('Failed to publish');\r\n              }\r\n        });\r\n    }\r\n\r\n    \r\n    if(redirect){\r\n      return (<Navigate to={'/'} />)\r\n      } \r\n   \r\n    return(\r\n        status &&\r\n        (<section>\r\n          <form className=\"post\" onSubmit={onSubmit}>\r\n            <input onChange={postData} \r\n            type=\"text\" name=\"title\" \r\n            placeholder=\"Your Blog title\"  \r\n            value={post.title} required/>\r\n\r\n            <input onChange={postData} \r\n            type=\"text\" name=\"summary\" \r\n            placeholder=\"Summary\" maxLength=\"150\" value=\r\n            {post.summary}/>\r\n\r\n            <input onChange={postFiles} ref={inputRef} \r\n            type=\"file\" name=\"image\" required/>\r\n\r\n            <Editor value={content} onChange={setContent} />\r\n            <button id=\"post-btn\" type=\"submit\">Publish</button>\r\n          </form>\r\n        </section>)\r\n    )\r\n}\r\n\r\nexport default Blog;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}