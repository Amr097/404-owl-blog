{"ast":null,"code":"import _slicedToArray from\"C:/Users/Owner/Desktop/github/Blog/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import{format}from\"date-fns\";import{StateContext}from\"../StateContext\";import{Navigate}from\"react-router-dom\";import{Image}from\"../functions/image\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostPage=function PostPage(){var _useState=useState({content:\"\",image:\"\",summary:\"\",title:\"\",_id:\"\",createdAt:new Date(),author:{username:\"\",_id:\"\"}}),_useState2=_slicedToArray(_useState,2),postInfo=_useState2[0],setPostInfo=_useState2[1];var _useParams=useParams(),id=_useParams.id;var _useContext=useContext(StateContext),status=_useContext.status,setStatus=_useContext.setStatus;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];useEffect(function(){fetch(\"http://localhost:4000/post/\".concat(id),{method:'GET',credentials:'include'}).then(function(response){response.json().then(function(user){setPostInfo(user.post);//console.log(user.post)\n});});},[]);var deletePost=function deletePost(event){event.preventDefault();fetch(\"http://localhost:4000/delete/\".concat(id),{method:'DELETE',credentials:'include'}).then(function(response){if(response.ok){setRedirect(true);}});};if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}if(!postInfo){return'';}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"single-post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"head\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"single-info\",children:[\"  \",/*#__PURE__*/_jsx(\"a\",{className:\"single-author\",children:postInfo.author.username}),\" \",/*#__PURE__*/_jsx(\"time\",{children:format(new Date(postInfo.createdAt),'MMM d, yyy HH:mm')})]}),status.user&&postInfo.author._id===status.user._id&&/*#__PURE__*/_jsxs(\"div\",{className:\"custom-links\",children:[/*#__PURE__*/_jsxs(Link,{id:\"single-link\",to:\"/edit/\".concat(postInfo._id),children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"link-p\",children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"a\",{id:\"delete-link\",href:\"\",onClick:deletePost,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"link-p\",children:\"Delete\"})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:postInfo.title}),/*#__PURE__*/_jsx(\"p\",{className:\"single-summary\",children:postInfo.summary}),/*#__PURE__*/_jsx(\"div\",{className:\"single-image\",children:/*#__PURE__*/_jsx(Image,{src:postInfo.image})}),/*#__PURE__*/_jsx(\"p\",{className:\"single-content\",dangerouslySetInnerHTML:{__html:postInfo.content}})]})]});}};export default PostPage;","map":{"version":3,"names":["React","useContext","useState","useEffect","Link","useParams","format","StateContext","Navigate","Image","jsx","_jsx","jsxs","_jsxs","PostPage","_useState","content","image","summary","title","_id","createdAt","Date","author","username","_useState2","_slicedToArray","postInfo","setPostInfo","_useParams","id","_useContext","status","setStatus","_useState3","_useState4","redirect","setRedirect","fetch","concat","method","credentials","then","response","json","user","post","deletePost","event","preventDefault","ok","to","className","children","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","href","onClick","src","dangerouslySetInnerHTML","__html"],"sources":["C:/Users/Owner/Desktop/github/blog/frontend/src/components/PostPage.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {format} from \"date-fns\"\r\nimport { StateContext } from \"../StateContext\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { Image } from \"../functions/image\";\r\n\r\n\r\n\r\nconst PostPage = ()=>{\r\n \r\n   const [postInfo, setPostInfo] = useState({\r\n        content:\"\", image:\"\", summary:\"\", title:\"\", _id:\"\", \r\n        createdAt:new Date(),author:{username:\"\", _id:\"\"}\r\n       })\r\n\r\n    const {id} = useParams();\r\n    const {status, setStatus} = useContext(StateContext);\r\n    const[redirect, setRedirect]= useState(false)\r\n\r\n\r\n\r\n    useEffect(\r\n        ()=>{\r\n           fetch(`http://localhost:4000/post/${id}`,{\r\n            method:'GET',\r\n            credentials:'include'\r\n           }).then(response=>{\r\n              response.json().then(user=>{\r\n                setPostInfo(user.post);\r\n                //console.log(user.post)\r\n              })\r\n           })\r\n    }, []);\r\n   \r\n \r\n\r\nconst deletePost = (event)=>{\r\n    event.preventDefault();\r\n    fetch(`http://localhost:4000/delete/${id}`,{\r\n        method:'DELETE',\r\n        credentials:'include',\r\n       }).then(response=>{\r\n        if(response.ok){\r\n            setRedirect(true);\r\n        }\r\n       })\r\n}\r\n\r\nif(redirect){\r\n    return (<Navigate to={'/'} />)\r\n    }  \r\n\r\nif(!postInfo){\r\n    return '';\r\n}\r\nelse{\r\n    return( \r\n        <div className=\"single-post\">\r\n        <div className=\"head\">\r\n        <p className=\"single-info\">  <a className=\"single-author\">{postInfo.author.username}</a> <time>{format(new Date(postInfo.createdAt), 'MMM d, yyy HH:mm')}</time></p> \r\n        {status.user && postInfo.author._id === status.user._id &&\r\n        (<div className=\"custom-links\">\r\n        <Link id=\"single-link\" to={`/edit/${postInfo._id}`}>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10\" />\r\n        </svg><p className=\"link-p\">Edit</p></Link>\r\n         \r\n         <a id=\"delete-link\" href=\"\" onClick={deletePost}>\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n         <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\" />\r\n         </svg><p className=\"link-p\">Delete</p></a>\r\n        </div>)}\r\n        </div>\r\n        <section className=\"content\">\r\n        <h2>{postInfo.title}</h2>\r\n        <p className=\"single-summary\">{postInfo.summary}</p>\r\n        <div className=\"single-image\">\r\n        <Image src={postInfo.image}/>\r\n        </div>\r\n        <p className=\"single-content\" dangerouslySetInnerHTML={{__html:postInfo.content}}/>\r\n        </section>\r\n        \r\n       \r\n        </div>\r\n    )\r\n}\r\n\r\n}\r\n\r\nexport default PostPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}